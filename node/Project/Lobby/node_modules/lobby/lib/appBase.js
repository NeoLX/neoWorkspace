'use strict'

var events = require('events');
var PATH = require("path");
var util = require('util');

function AppBase(){

    this._status = 0;

    //AppBase初始化
    this.init = function () {
               
        //初始化事件
		this.on(AppBase.Handles.onInited, initedHandle);
		this.on(AppBase.Handles.onStatusChange, this.statusChangeHandle);
        
    };
    
    //初始化完成后执行
    var initedHandle = function(){
        console.log("Inited");
    }
    
    //状态变化总控
    this.statusChangeHandle = function(){
		console.log("base status change handle:status[" + this._status + "]");
        
        switch(this._status){
				case AppBase.Status.Inited:
					this.emit(AppBase.Handles.onInited);
                    break;
				default:
					break;
			}
	}
    
    //更新状态	
    this.setStatus = function (status) {
        
        this._status = status;
        
        console.log("Status Change:" + this._status);
        this.emit(AppBase.Handles.onStatusChange);
        
    }
    
};
util.inherits(AppBase,events.EventEmitter);


// AppBase.prototype.setStatus

AppBase.Handles = {};
AppBase.Handles.onStatusChange = "ON_STATUS_CHANGE";
AppBase.Handles.onInited = "ON_INITED";

AppBase.Status = {};
AppBase.Status.Inited = 100;

module.exports = AppBase;